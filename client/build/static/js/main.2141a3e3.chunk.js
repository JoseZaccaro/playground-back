(this["webpackJsonpplayground-backend"]=this["webpackJsonpplayground-backend"]||[]).push([[0],{41:function(e,t,r){},69:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(14),s=r.n(o),c=(r(41),r(9)),i=r(2),u=r(10),l=r(11),d=r(13),p=r(12),j=r(5),b=r(3),h=r.n(b),m=r(8),O=r(18),f={registrarUsuario:function(e,t){return function(){var r=Object(m.a)(h.a.mark((function r(a,n){var o;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.post("https://lista-productos-playground.herokuapp.com/api/auth/signUp",{userName:e,password:t});case 3:if(!(o=r.sent).data.success||o.data.error){r.next=10;break}return localStorage.setItem("token",o.data.response.token),a({type:"usuario",payload:{userName:e}}),r.abrupt("return",{errores:[{message:"Successfully logged in"}]});case 10:return console.error(o.data.response),r.abrupt("return",{errores:o.data.errores});case 12:r.next=16;break;case 14:r.prev=14,r.t0=r.catch(0);case 16:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(e,t){return r.apply(this,arguments)}}()},iniciarSesion:function(e,t){return function(){var r=Object(m.a)(h.a.mark((function r(a,n){var o;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.post("https://lista-productos-playground.herokuapp.com/api/auth/signIn",{userName:e,password:t});case 3:if(!(o=r.sent).data.success||o.data.error){r.next=10;break}return localStorage.setItem("token",o.data.response.token),a({type:"usuario",payload:{userName:o.data.response.userName}}),r.abrupt("return",{errores:[{message:"Successfully logged in"}]});case 10:return console.log(o.data),r.abrupt("return",{errores:[{message:"error trying to sign in"}]});case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),console.error(r.t0);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(e,t){return r.apply(this,arguments)}}()},logOut:function(){return function(e,t){localStorage.clear(),e({type:"logOut"})}}},x=f,v=r(1);var g={logOut:x.logOut},y=Object(j.b)((function(e){return{usuario:e.authReducer.usuario}}),g)((function(e){return Object(v.jsxs)("header",{children:[Object(v.jsxs)("nav",{children:[Object(v.jsx)(c.b,{to:"/",children:"Home"}),Object(v.jsx)(c.b,{to:"/lista",children:"Listas"}),""!==e.usuario.userName&&Object(v.jsx)(c.b,{to:"/formulario",children:"Formulario"}),""===e.usuario.userName?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(c.b,{to:"/registro",children:"Registro"}),Object(v.jsx)(c.b,{to:"/inicioSesion",children:"Inicio sesion"})]}):Object(v.jsx)(c.b,{to:"/",onClick:e.logOut,children:"Log out"})]}),""!==e.usuario.userName?Object(v.jsxs)("h1",{children:["Bienvenido ",e.usuario.userName.slice(0,e.usuario.userName.indexOf("@"))]}):Object(v.jsx)("h1",{children:"No estas registrado"})]})})),k=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(y,{}),Object(v.jsx)("main",{className:"main-home",children:Object(v.jsx)("h1",{children:"Playground backend"})})]})}}]),r}(n.a.Component),N=k,w=function(e){var t=e.productos,r=e.filtrar;return Object(v.jsx)("div",{className:"contenedor-botones",children:Object(v.jsx)("input",{type:"text",className:"input",autoComplete:"off",name:"filtro",onChange:function(e){return r(t,e.target.value)},placeholder:"Filtrar"})})},S=r(18),P=r.n(S),C={fetchearProductos:function(){return function(){var e=Object(m.a)(h.a.mark((function e(t,r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("https://lista-productos-playground.herokuapp.com/api/productos");case 2:a=e.sent,t({type:"fetch",payload:a.data.respuesta});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},borrarProducto:function(e){return function(){var t=Object(m.a)(h.a.mark((function t(r,a){var n,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.prev=1,t.next=4,P.a.delete("https://lista-productos-playground.herokuapp.com/api/productos/"+e,{headers:{Authorization:"Bearer "+n}});case 4:o=t.sent,r({type:"delete",payload:o.data.respuesta}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}()},filtrar:function(e,t){return function(r,a){r({type:"filtro",payload:{productos:e,value:t}})}},cargarProducto:function(e,t){return function(){var r=Object(m.a)(h.a.mark((function r(a,n){var o,s;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=localStorage.getItem("token"),r.next=3,P.a.post("https://lista-productos-playground.herokuapp.com/api/productos",{name:e,precio:t},{headers:{Authorization:"Bearer ".concat(o)}});case 3:s=r.sent,a({type:"cargarProducto",payload:s.data.respuesta});case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}},R=C,I=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={arrayRender:[]},e.handleDelete=function(t){e.props.borrarProducto(t)},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.productos.length<1&&this.props.fetchearProductos()}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(y,{}),Object(v.jsx)("main",{className:"main-home",children:Object(v.jsxs)("div",{className:"contenedor-lista-btn",children:[Object(v.jsx)(w,{filtrar:this.props.filtrar,productos:this.props.auxiliar}),Object(v.jsx)("div",{className:"contenedor-listas",children:Object(v.jsx)("div",{className:"lista",children:this.props.productos&&this.props.productos.map((function(t){var r=t.img?"animes":t.precio?"productos":"personas";return Object(v.jsxs)("div",{className:"contenedor-individual",children:[Object(v.jsx)("h3",{children:t.name}),t.edad&&Object(v.jsx)("h3",{children:t.edad}),t.img&&Object(v.jsx)("div",{style:{backgroundImage:"url('".concat(t.img,"')")},className:"imagen"}),Object(v.jsx)(c.b,{to:"/".concat(r,"/").concat(t._id),className:"boton",children:"Ver elemento"}),Object(v.jsx)("button",{onClick:function(){return e.handleDelete(t._id)},className:"boton",children:"ELIMINAR elemento"})]},t._id)}))})})]})})]})}}]),r}(n.a.Component),A={fetchearProductos:R.fetchearProductos,borrarProducto:R.borrarProducto,filtrar:R.filtrar},U=Object(j.b)((function(e){return{productos:e.filtroReducer.productos,auxiliar:e.filtroReducer.auxiliar}}),A)(I),D=r(35),L=r.n(D);var B=function(e){var t=Object(a.useRef)(),r=Object(a.useRef)(),n=e.handleSubmit,o=e.data,s=function(e){console.log(e),e.profileObj&&n(e.profileObj.email,e.profileObj.email)};return Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(t.current.value,r.current.value),t.current.value="",r.current.value=""},children:[Object(v.jsxs)("label",{style:{display:"flex",flexDirection:"column"},children:[(null===o||void 0===o?void 0:o.first)?o.first:"Nombre del producto:",Object(v.jsx)("input",{className:"input",type:"text",ref:t,name:"name"})]}),Object(v.jsxs)("label",{style:{display:"flex",flexDirection:"column"},children:[(null===o||void 0===o?void 0:o.second)?o.second:"Precio del producto:",Object(v.jsx)("input",{className:"input",type:"text",ref:r,name:"precio"})]}),Object(v.jsx)("input",{type:"submit",value:"Enviar"}),(null===o||void 0===o?void 0:o.first)&&Object(v.jsx)(L.a,{clientId:"792597804652-7pt8nl335rt8mi2fjod6eb5rb23h132p.apps.googleusercontent.com",buttonText:"Login",onSuccess:s,onFailure:s,cookiePolicy:"single_host_origin"})]})},F=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleSubmit=function(){var t=Object(m.a)(h.a.mark((function t(r,a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.cargarProducto(r,a);case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(r,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(y,{}),Object(v.jsx)("h1",{style:{width:"100%",textAlign:"center"},children:"Cargar Productos"}),Object(v.jsx)("main",{className:"main-formulario",children:Object(v.jsx)(B,{handleSubmit:this.handleSubmit})})]})}}]),r}(n.a.Component),_={cargarProducto:R.cargarProducto},E=Object(j.b)((function(e){return{usuario:e.filtroReducer.usuario}}),_)(F),H=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(u.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={elemento:{name:"-"}},e.endpoint=e.props.params.endpoint,e.id=e.props.params.id,e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.setState({elemento:this.props.productos.find((function(t){return t._id===e.id}))})}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"element",children:[Object(v.jsx)(y,{}),Object(v.jsx)("h1",{children:this.state.elemento.name}),(this.state.elemento.edad||this.state.elemento.precio)&&Object(v.jsxs)("h3",{children:[this.state.elemento.edad?"Edad: ".concat(this.state.elemento.edad):"Precio: $ ".concat(this.state.elemento.precio)," "]}),this.state.elemento.img&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{style:{backgroundImage:"url('".concat(this.state.elemento.img,"')")},className:"imagen"}),Object(v.jsx)("p",{children:this.state.elemento.description})]})]})}}]),r}(n.a.Component),M=Object(j.b)((function(e){return{productos:e.filtroReducer.productos}}))(H),z=r(4);var J,T=r(16),V={registrarUsuario:x.registrarUsuario},W=Object(j.b)((function(e){return{usuario:e.authReducer.usuario}}),V)((function(e){var t=function(){var t=Object(m.a)(h.a.mark((function t(r,a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.registrarUsuario(r,a);case 2:n=t.sent,console.log(n),n.errores&&n.errores.map((function(e){return Object(T.b)(e.message,{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(y,{nombreUsuario:e.usuario.userName}),Object(v.jsx)("h1",{style:{width:"100%",textAlign:"center"},children:" Registrate"}),Object(v.jsx)("main",{className:"main-formulario",children:Object(v.jsx)(B,{data:{first:"Usuario",second:"Constrase\xf1a"},handleSubmit:t})})]})})),$={iniciarSesion:x.iniciarSesion},q=Object(j.b)((function(e){return{usuario:e.authReducer.usuario}}),$)((function(e){var t=function(){var t=Object(m.a)(h.a.mark((function t(r,a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iniciarSesion(r,a);case 2:n=t.sent,console.log(n),n.errores&&n.errores.map((function(e){return Object(T.b)(e.message,{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(y,{nombreUsuario:e.usuario.userName}),Object(v.jsx)("h1",{style:{width:"100%",textAlign:"center"},children:" Inicia sesi\xf3n"}),Object(v.jsx)("main",{className:"main-formulario",children:Object(v.jsx)(B,{data:{first:"Usuario",second:"Constrase\xf1a"},handleSubmit:t})})]})})),G=(r(68),J=M,function(e){var t=Object(i.e)(),r=Object(i.f)(),a=Object(i.g)();return Object(v.jsx)(J,Object(z.a)(Object(z.a)({},e),{},{params:a,navigate:r,location:t}))}),K=Object(j.b)((function(e){return{usuario:e.authReducer.usuario}}))((function(e){return Object(v.jsxs)(c.a,{children:[Object(v.jsxs)(i.c,{children:[Object(v.jsx)(i.a,{path:"/",element:Object(v.jsx)(N,{})}),Object(v.jsx)(i.a,{path:"/lista",element:Object(v.jsx)(U,{})}),""!==e.usuario.userName&&Object(v.jsx)(i.a,{path:"/formulario",element:Object(v.jsx)(E,{})}),""===e.usuario.userName&&Object(v.jsx)(i.a,{path:"/registro",element:Object(v.jsx)(W,{})}),""===e.usuario.userName&&Object(v.jsx)(i.a,{path:"/inicioSesion",element:Object(v.jsx)(q,{})}),Object(v.jsx)(i.a,{path:"/:endpoint/:id",element:Object(v.jsx)(G,{})}),Object(v.jsx)(i.a,{path:"*",element:Object(v.jsx)(N,{})})]}),Object(v.jsx)(T.a,{newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})),Q=r(20),X=r(36),Y=r(25),Z={productos:[],usuario:{userName:""},auxiliar:[]},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch":return Object(z.a)(Object(z.a)({},e),{},{productos:t.payload,auxiliar:t.payload});case"delete":return Object(z.a)(Object(z.a)({},e),{},{productos:t.payload});case"usuario":return Object(z.a)(Object(z.a)({},e),{},{usuario:t.payload});case"cargarProducto":var r=Object(Y.a)(e.productos);return r.push(t.payload),Object(z.a)(Object(z.a)({},e),{},{productos:r,auxiliar:Object(Y.a)(r)});case"filtro":var a=t.payload.productos.filter((function(e){return e.name.toLowerCase().startsWith(t.payload.value.toLowerCase())}));return Object(z.a)(Object(z.a)({},e),{},{productos:a});default:return e}},te={usuario:{userName:""}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"usuario":return Object(z.a)(Object(z.a)({},e),{},{usuario:t.payload});case"logOut":return Object(z.a)({},te);default:return e}},ae=Object(Q.b)({filtroReducer:ee,authReducer:re}),ne=Object(Q.c)(ae,Object(Q.a)(X.a));s.a.render(Object(v.jsx)(j.a,{store:ne,children:Object(v.jsx)(K,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.2141a3e3.chunk.js.map